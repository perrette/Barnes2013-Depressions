Barnes2013-Depressions
======================

**Title of Manuscript**:
Priority-Flood: An Optimal Depression-Filling and Watershed-Labeling Algorithm
for Digital Elevation Models (TODO: DOI, following publication)

**Authors**: Richard Barnes, Clarence Lehman, David Mulla

**Corresponding Author**: Richard Barnes (rbarnes@umn.edu)

TODO: The following requires extensive revision as it has simply been copied from the Barnes2013-Flats README.md for use as a template.

This repository contains a reference implementation of the algorithms presented
in the manuscript above. These implementations were used in performing the
speed tests in the manuscript.

All the code can be compiled simply by running **make**.

TODO
The two reference implementations use the D8 neighbour system to indicate flow
directions. In this system all the flow from a central cell is directed to a
single neighbour which is represented by a number according to the following
system where 0 indicates the central cell.

    234
    105
    876


The program **generate\_square\_grid.exe** makes a square DEM with a single
outlet near the bottom-left corner. The grid size is specified as a
command-line argument. TODO



The program **barnes\_algorithm.exe** reads in a DEM file specified on the
command line. The file may be generated by **generate\_square\_grid.exe**, but
may also be any ArcGrid ASCII file. The program will time itself and report the
results back. The program will print the determined flow directions for the DEM
to a file named **out\_barnes**. The determined flow directions are also
printed as a matrix of arrows to **out\_barnes\_arrows**. TODO


The directory **src/** contains the source code for reference implementations.
The source for the improved algorithm is drawn from the RichDEM hydroanalysis
pacakge. All code can be compiled by running the **makefile** included in the
root directory. Running the BASH script **FIRST_RUN** will compile everything
and run the programs.

At the time of writing, the entire RichDEM code base could be downloaded from:
[https://github.com/r-barnes](https://github.com/r-barnes)
